{% load bootstrap4 %}
{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type"
        content="text/html; charset=utf-8">
        <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>{% block title %}Главная{% endblock %} - Safe-Deal
        </title>
        {% bootstrap_css %}
        <link rel="stylesheet" type="text/css" href="{% static 'main/style.css' %}">
        {% bootstrap_javascript jquery='slim' %}

    </head>

    <style>
.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #ffffff;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown-content a:hover {background-color: #ddd;}

.dropdown:hover .dropdown-content {display: block;}
</style>

<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand mr-auto" href="{% url 'main:index' %}"><h4>Safe Deal</h4></a>
  <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>


  <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
    <ul class="navbar-nav ml-auto">

            <li class="nav-item ml-auto">
                <a class="nav-link" href="#" style="color: white;">
                    Тарифы
                </a>
            </li>

            <li class="nav-item ml-auto">
                <a class="nav-link" href="#" style="color: white;">
                    Инструкции
                </a>
            </li>


            {% if user.is_authenticated %}

            <li class="nav-item ml-auto">
                <a class="nav-link" href="{% url 'main:profile' %}" style="color: white;">
                    Личный кабинет
                </a>
            </li>

            <li class="dropdown ml-auto nav-item" id="app" style="float:right;">
                <a class="dropdown-toggle ml-auto nav-link"
                data-toggle="dropdown" href="#"
                role="button" aria-haspopup="true"
                aria-expanded="false" style="color: white;"></a>
                <div class="dropdown-content ml-auto" style="right:0;">
                    <a class="nav-link text-dark ml-auto" href="{% url 'main:personal' %}">
                    Личные данные
                    </a>
                    <a class="nav-link text-dark" href="{% url 'main:password_change' %}">
                    Изменить пароль
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" hrеf="#">Служба поддержки</a>
                    <div class="dropdown-divider"></div>
                    <a class="nav-link text-dark" href="{% url 'main:profile_delete' %}">
                    Удалить
                    </a>
                </div>

            </li>

            <li class="nav-item ml-auto">
                <a class="nav-link" href="{% url 'main:logout' %}" style="color: white;">
                    Выход
                </a>
            </li>

            {% else %}

            <li class="nav-item ml-auto">
                <a class="nav-link root" href="{% url 'main:login' %}" style="color: white;">
                    Вход/Регистрация
                </a>
            </li>

            {% endif %}
    </ul>
  </div>
</nav>
    <div class="row">
        <section class="account">

            {% block account %}
            {% endblock %}
        </section>
    </div>

    <div class="row">
        <section class="content">
            {% block content %}
            {% endblock %}
        </section>
    </div>
    <footer class="mt-3">
        <p class="text-right font-italic" style="margin: 40px;">&copy; 2019г.</p>
    </footer>


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
	new Vue({
		el:'#app',
		data: {
			x:0,
			y:0
		},
		methods: {
			handleMouseEvent : function(event) {
                    var ev = document.createEvent("MouseEvent");
                    var el = event.target;
                    ev.initMouseEvent(
                    "click",
                    true, true,
                    window, null,
                    0, 0, 0, 0,
                    false, false, false, false,
                    0 , event.relatedTarget
                    );
                    el.dispatchEvent(ev);
			},
		}
	})
</script>


</body>
</html>